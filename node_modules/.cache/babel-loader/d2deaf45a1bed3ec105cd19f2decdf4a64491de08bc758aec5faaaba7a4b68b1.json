{"ast":null,"code":"import axios from'axios';// הגדרת כתובת ה-API כ-default\naxios.defaults.baseURL='http://localhost:5050';// הוספת interceptor להוספת JWT token לכל בקשה\naxios.interceptors.request.use(config=>{const token=localStorage.getItem('token');if(token){config.headers.Authorization=\"Bearer \".concat(token);}return config;},error=>{return Promise.reject(error);});// הוספת interceptor לתפיסת שגיאות\naxios.interceptors.response.use(response=>response,error=>{console.error('There was an error!',error);// אם קיבלנו 401 (Unauthorized), מעבירים לדף התחברות\nif(error.response&&error.response.status===401){localStorage.removeItem('token');window.location.href='/login';}return Promise.reject(error);});export default{// פונקציות הזדהות\nregister:async(username,password)=>{const result=await axios.post('/register',{username,password});return result.data;},login:async(username,password)=>{const result=await axios.post('/login',{username,password});if(result.data.token){localStorage.setItem('token',result.data.token);localStorage.setItem('username',result.data.username);}return result.data;},logout:()=>{localStorage.removeItem('token');localStorage.removeItem('username');},isLoggedIn:()=>{return!!localStorage.getItem('token');},// פונקציות משימות\ngetTasks:async()=>{const result=await axios.get('/tasks');return result.data;},addTask:async name=>{console.log('addTask',name);const result=await axios.post('/tasks',{name});return result.data;},setCompleted:async(id,name,isComplete)=>{console.log('setCompleted',{id,name,isComplete});const result=await axios.put(\"/tasks/\".concat(id),{name,isComplete});return result.data;},updateTask:async(id,name,isComplete)=>{console.log('updateTask',{id,name,isComplete});const result=await axios.put(\"/tasks/\".concat(id),{name,isComplete});return result.data;},deleteTask:async id=>{console.log('deleteTask',id);await axios.delete(\"/tasks/\".concat(id));}};","map":{"version":3,"names":["axios","defaults","baseURL","interceptors","request","use","config","token","localStorage","getItem","headers","Authorization","concat","error","Promise","reject","response","console","status","removeItem","window","location","href","register","username","password","result","post","data","login","setItem","logout","isLoggedIn","getTasks","get","addTask","name","log","setCompleted","id","isComplete","put","updateTask","deleteTask","delete"],"sources":["C:/Users/user1/Documents/יעלי/סמינר/תכנות/שנה ב/practicode/practicod3-kravitz-yaeli/‏‏TodoApi - עותק/ToDoListReact/src/service.js"],"sourcesContent":["import axios from 'axios';\r\n\r\n// הגדרת כתובת ה-API כ-default\r\naxios.defaults.baseURL = 'http://localhost:5050';\r\n\r\n// הוספת interceptor להוספת JWT token לכל בקשה\r\naxios.interceptors.request.use(\r\n  config => {\r\n    const token = localStorage.getItem('token');\r\n    if (token) {\r\n      config.headers.Authorization = `Bearer ${token}`;\r\n    }\r\n    return config;\r\n  },\r\n  error => {\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\n// הוספת interceptor לתפיסת שגיאות\r\naxios.interceptors.response.use(\r\n  response => response,\r\n  error => {\r\n    console.error('There was an error!', error);\r\n    \r\n    // אם קיבלנו 401 (Unauthorized), מעבירים לדף התחברות\r\n    if (error.response && error.response.status === 401) {\r\n      localStorage.removeItem('token');\r\n      window.location.href = '/login';\r\n    }\r\n    \r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\nexport default {\r\n  // פונקציות הזדהות\r\n  register: async (username, password) => {\r\n    const result = await axios.post('/register', { username, password });\r\n    return result.data;\r\n  },\r\n\r\n  login: async (username, password) => {\r\n    const result = await axios.post('/login', { username, password });\r\n    if (result.data.token) {\r\n      localStorage.setItem('token', result.data.token);\r\n      localStorage.setItem('username', result.data.username);\r\n    }\r\n    return result.data;\r\n  },\r\n\r\n  logout: () => {\r\n    localStorage.removeItem('token');\r\n    localStorage.removeItem('username');\r\n  },\r\n\r\n  isLoggedIn: () => {\r\n    return !!localStorage.getItem('token');\r\n  },\r\n\r\n  // פונקציות משימות\r\n  getTasks: async () => {\r\n    const result = await axios.get('/tasks');\r\n    return result.data;\r\n  },\r\n\r\n  addTask: async (name) => {\r\n    console.log('addTask', name);\r\n    const result = await axios.post('/tasks', { name });\r\n    return result.data;\r\n  },\r\n\r\n  setCompleted: async (id, name, isComplete) => {\r\n    console.log('setCompleted', { id, name, isComplete });\r\n    const result = await axios.put(`/tasks/${id}`, { name, isComplete });\r\n    return result.data;\r\n  },\r\n\r\n  updateTask: async (id, name, isComplete) => {\r\n    console.log('updateTask', { id, name, isComplete });\r\n    const result = await axios.put(`/tasks/${id}`, { name, isComplete });\r\n    return result.data;\r\n  },\r\n\r\n  deleteTask: async (id) => {\r\n    console.log('deleteTask', id);\r\n    await axios.delete(`/tasks/${id}`);\r\n  }\r\n};\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
{"ast":null,"code":"import axios from 'axios';\n\n// הגדרת כתובת ה-API כ-default\naxios.defaults.baseURL = 'http://localhost:5050';\n\n// הוספת interceptor לתפיסת שגיאות\naxios.interceptors.response.use(response => response,\n// אם התגובה תקינה, מחזירים אותה\nerror => {\n  console.error('There was an error!', error); // רושמים את השגיאה ללוג\n  return Promise.reject(error); // דוחים את השגיאה כדי שהקוד שיקרא את ה-API יוכל לטפל בה\n});\n\n// דוגמה לפונקציה שמשתמשת ב-axios\nexport const getTasks = () => {\n  return axios.get('/tasks'); // קריאה ל-API\n};\nconst apiUrl = \"http://localhost:5050\";\naxios.defaults.baseURL = apiUrl;\naxios.interceptors.response.use(response => response, error => {\n  console.error('There was an error!', error);\n  return Promise.reject(error);\n});\nexport default {\n  getTasks: async () => {\n    const result = await axios.get(`/tasks`);\n    return result.data;\n  },\n  addTask: async name => {\n    console.log('addTask', name);\n    const result = await axios.post(`/tasks`, {\n      name\n    });\n    return result.data;\n  },\n  setCompleted: async (id, isComplete) => {\n    console.log('setCompleted', {\n      id,\n      isComplete\n    });\n    const result = await axios.put(`/tasks/${id}`, {\n      isComplete\n    });\n    return result.data;\n  },\n  deleteTask: async id => {\n    console.log('deleteTask', id);\n    await axios.delete(`/tasks/${id}`);\n  }\n};\nconst express = require('express');\nconst jwt = require('jsonwebtoken');\nconst bcrypt = require('bcrypt');\nconst cors = require('cors');\nconst app = express();\napp.use(cors());\napp.use(express.json());\nconst users = []; // רשימה לאחסון משתמשים (במקום בסיס נתונים)\n\n// רישום משתמש חדש\napp.post('/register', async (req, res) => {\n  const hashedPassword = await bcrypt.hash(req.body.password, 10);\n  const user = {\n    username: req.body.username,\n    password: hashedPassword\n  };\n  users.push(user);\n  res.status(201).send();\n});\n\n// התחברות\napp.post('/login', async (req, res) => {\n  const user = users.find(u => u.username === req.body.username);\n  if (!user || !(await bcrypt.compare(req.body.password, user.password))) {\n    return res.status(401).send('Unauthorized');\n  }\n  const token = jwt.sign({\n    username: user.username\n  }, 'secret_key'); // החלף במפתח סודי\n  res.json({\n    token\n  });\n});\n\n// Middleware לאימות JWT\napp.get('/protected', (req, res) => {\n  var _req$headers$authoriz;\n  const token = (_req$headers$authoriz = req.headers['authorization']) === null || _req$headers$authoriz === void 0 ? void 0 : _req$headers$authoriz.split(' ')[1];\n  if (!token) return res.sendStatus(401);\n  jwt.verify(token, 'secret_key', (err, user) => {\n    if (err) return res.sendStatus(403);\n    res.json({\n      message: 'Protected content',\n      user\n    });\n  });\n});\napp.listen(3000, () => {\n  console.log('Server running on http://localhost:3000');\n});","map":{"version":3,"names":["axios","defaults","baseURL","interceptors","response","use","error","console","Promise","reject","getTasks","get","apiUrl","result","data","addTask","name","log","post","setCompleted","id","isComplete","put","deleteTask","delete","express","require","jwt","bcrypt","cors","app","json","users","req","res","hashedPassword","hash","body","password","user","username","push","status","send","find","u","compare","token","sign","_req$headers$authoriz","headers","split","sendStatus","verify","err","message","listen"],"sources":["C:/Users/user1/Documents/יעלי/סמינר/תכנות/שנה ב/practicode/practicod3-kravitz-yaeli/TodoApi/ToDoListReact/src/service.js"],"sourcesContent":["import axios from 'axios';\r\n\r\n\r\n// הגדרת כתובת ה-API כ-default\r\naxios.defaults.baseURL = 'http://localhost:5050';\r\n\r\n// הוספת interceptor לתפיסת שגיאות\r\naxios.interceptors.response.use(\r\n  response => response, // אם התגובה תקינה, מחזירים אותה\r\n  error => {\r\n    console.error('There was an error!', error); // רושמים את השגיאה ללוג\r\n    return Promise.reject(error); // דוחים את השגיאה כדי שהקוד שיקרא את ה-API יוכל לטפל בה\r\n  }\r\n);\r\n\r\n// דוגמה לפונקציה שמשתמשת ב-axios\r\nexport const getTasks = () => {\r\n  return axios.get('/tasks'); // קריאה ל-API\r\n};\r\n\r\nconst apiUrl = \"http://localhost:5050\";\r\n\r\naxios.defaults.baseURL = apiUrl;\r\n\r\naxios.interceptors.response.use(\r\n  response => response,\r\n  error => {\r\n    console.error('There was an error!', error);\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\nexport default {\r\n  getTasks: async () => {\r\n    const result = await axios.get(`/tasks`);\r\n    return result.data;\r\n  },\r\n\r\n  addTask: async (name) => {\r\n    console.log('addTask', name);\r\n    const result = await axios.post(`/tasks`, { name });\r\n    return result.data;\r\n  },\r\n\r\n  setCompleted: async (id, isComplete) => {\r\n    console.log('setCompleted', { id, isComplete });\r\n    const result = await axios.put(`/tasks/${id}`, { isComplete });\r\n    return result.data;\r\n  },\r\n\r\n  deleteTask: async (id) => {\r\n    console.log('deleteTask', id);\r\n    await axios.delete(`/tasks/${id}`);\r\n  }\r\n};\r\n\r\nconst express = require('express');\r\nconst jwt = require('jsonwebtoken');\r\nconst bcrypt = require('bcrypt');\r\nconst cors = require('cors');\r\n\r\nconst app = express();\r\napp.use(cors());\r\napp.use(express.json());\r\n\r\nconst users = []; // רשימה לאחסון משתמשים (במקום בסיס נתונים)\r\n\r\n// רישום משתמש חדש\r\napp.post('/register', async (req, res) => {\r\n    const hashedPassword = await bcrypt.hash(req.body.password, 10);\r\n    const user = { username: req.body.username, password: hashedPassword };\r\n    users.push(user);\r\n    res.status(201).send();\r\n});\r\n\r\n// התחברות\r\napp.post('/login', async (req, res) => {\r\n    const user = users.find(u => u.username === req.body.username);\r\n    if (!user || !await bcrypt.compare(req.body.password, user.password)) {\r\n        return res.status(401).send('Unauthorized');\r\n    }\r\n    const token = jwt.sign({ username: user.username }, 'secret_key'); // החלף במפתח סודי\r\n    res.json({ token });\r\n});\r\n\r\n// Middleware לאימות JWT\r\napp.get('/protected', (req, res) => {\r\n    const token = req.headers['authorization']?.split(' ')[1];\r\n    if (!token) return res.sendStatus(401);\r\n\r\n    jwt.verify(token, 'secret_key', (err, user) => {\r\n        if (err) return res.sendStatus(403);\r\n        res.json({ message: 'Protected content', user });\r\n    });\r\n});\r\n\r\napp.listen(3000, () => {\r\n    console.log('Server running on http://localhost:3000');\r\n});\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
{"ast":null,"code":"import React,{useEffect,useState}from'react';import service from'./service.js';import Register from'./Register';import Login from'./Login';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function App(){const[newTodo,setNewTodo]=useState(\"\");const[todos,setTodos]=useState([]);const[currentView,setCurrentView]=useState('todos');// 'todos', 'login', 'register'\nconst[isLoggedIn,setIsLoggedIn]=useState(false);const[editingId,setEditingId]=useState(null);const[editingText,setEditingText]=useState(\"\");useEffect(()=>{setIsLoggedIn(service.isLoggedIn());if(service.isLoggedIn()){getTodos();}},[]);async function getTodos(){try{const todos=await service.getTasks();setTodos(todos);}catch(error){console.error('Failed to get todos:',error);}}async function createTodo(e){e.preventDefault();try{await service.addTask(newTodo);setNewTodo(\"\");await getTodos();}catch(error){console.error('Failed to create todo:',error);}}async function updateCompleted(todo,isComplete){try{await service.setCompleted(todo.id,todo.name,isComplete);await getTodos();}catch(error){console.error('Failed to update todo:',error);}}async function deleteTodo(id){try{await service.deleteTask(id);await getTodos();}catch(error){console.error('Failed to delete todo:',error);}}async function updateTodo(id,name,isComplete){try{await service.updateTask(id,name,isComplete);await getTodos();setEditingId(null);setEditingText(\"\");}catch(error){console.error('Failed to update todo:',error);}}function startEditing(todo){setEditingId(todo.id);setEditingText(todo.name);}function cancelEditing(){setEditingId(null);setEditingText(\"\");}function handleEditKeyPress(e,todo){if(e.key==='Enter'){updateTodo(todo.id,editingText,todo.isComplete);}else if(e.key==='Escape'){cancelEditing();}}function handleLogout(){service.logout();setIsLoggedIn(false);setTodos([]);setCurrentView('login');}// אם לא מחובר, הצג Login או Register\nif(!isLoggedIn){return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{style:{textAlign:'center',padding:'20px'},children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setCurrentView('login'),style:{margin:'10px',padding:'10px 20px'},children:\"Login\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setCurrentView('register'),style:{margin:'10px',padding:'10px 20px'},children:\"Register\"})]}),currentView==='login'&&/*#__PURE__*/_jsx(Login,{}),currentView==='register'&&/*#__PURE__*/_jsx(Register,{})]});}// אם מחובר, הצג את רשימת המשימות\nreturn/*#__PURE__*/_jsxs(\"section\",{className:\"todoapp\",children:[/*#__PURE__*/_jsxs(\"header\",{className:\"header\",children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',alignItems:'center'},children:[/*#__PURE__*/_jsx(\"h1\",{children:\"todos\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"span\",{style:{marginRight:'10px'},children:[\"Welcome, \",localStorage.getItem('username')]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleLogout,style:{padding:'5px 10px'},children:\"Logout\"})]})]}),/*#__PURE__*/_jsx(\"form\",{onSubmit:createTodo,children:/*#__PURE__*/_jsx(\"input\",{className:\"new-todo\",placeholder:\"Well, let's take on the day\",value:newTodo,onChange:e=>setNewTodo(e.target.value)})})]}),/*#__PURE__*/_jsx(\"section\",{className:\"main\",style:{display:\"block\"},children:/*#__PURE__*/_jsx(\"ul\",{className:\"todo-list\",children:todos.map(todo=>{const isEditing=editingId===todo.id;const className=todo.isComplete?\"completed\":\"\";const finalClassName=isEditing?className+\" editing\":className;return/*#__PURE__*/_jsxs(\"li\",{className:finalClassName,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"view\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"toggle\",type:\"checkbox\",checked:todo.isComplete,onChange:e=>updateCompleted(todo,e.target.checked)}),/*#__PURE__*/_jsx(\"label\",{onDoubleClick:()=>startEditing(todo),children:todo.name}),/*#__PURE__*/_jsx(\"button\",{className:\"destroy\",onClick:()=>deleteTodo(todo.id)})]}),isEditing&&/*#__PURE__*/_jsx(\"input\",{className:\"edit\",value:editingText,onChange:e=>setEditingText(e.target.value),onKeyDown:e=>handleEditKeyPress(e,todo),onBlur:()=>updateTodo(todo.id,editingText,todo.isComplete),autoFocus:true})]},todo.id);})})})]});}export default App;","map":{"version":3,"names":["React","useEffect","useState","service","Register","Login","jsx","_jsx","jsxs","_jsxs","App","newTodo","setNewTodo","todos","setTodos","currentView","setCurrentView","isLoggedIn","setIsLoggedIn","editingId","setEditingId","editingText","setEditingText","getTodos","getTasks","error","console","createTodo","e","preventDefault","addTask","updateCompleted","todo","isComplete","setCompleted","id","name","deleteTodo","deleteTask","updateTodo","updateTask","startEditing","cancelEditing","handleEditKeyPress","key","handleLogout","logout","children","style","textAlign","padding","onClick","margin","className","display","justifyContent","alignItems","marginRight","localStorage","getItem","onSubmit","placeholder","value","onChange","target","map","isEditing","finalClassName","type","checked","onDoubleClick","onKeyDown","onBlur","autoFocus"],"sources":["C:/Users/user1/Documents/יעלי/סמינר/תכנות/שנה ב/practicode/practicod3-kravitz-yaeli/‏‏TodoApi - עותק/ToDoListReact/src/App.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport service from './service.js';\nimport Register from './Register';\nimport Login from './Login';\n\nfunction App() {\n  const [newTodo, setNewTodo] = useState(\"\");\n  const [todos, setTodos] = useState([]);\n  const [currentView, setCurrentView] = useState('todos'); // 'todos', 'login', 'register'\n  const [isLoggedIn, setIsLoggedIn] = useState(false);\n  const [editingId, setEditingId] = useState(null);\n  const [editingText, setEditingText] = useState(\"\");\n\n  useEffect(() => {\n    setIsLoggedIn(service.isLoggedIn());\n    if (service.isLoggedIn()) {\n      getTodos();\n    }\n  }, []);\n\n  async function getTodos() {\n    try {\n      const todos = await service.getTasks();\n      setTodos(todos);\n    } catch (error) {\n      console.error('Failed to get todos:', error);\n    }\n  }\n\n  async function createTodo(e) {\n    e.preventDefault();\n    try {\n      await service.addTask(newTodo);\n      setNewTodo(\"\");\n      await getTodos();\n    } catch (error) {\n      console.error('Failed to create todo:', error);\n    }\n  }\n\n  async function updateCompleted(todo, isComplete) {\n    try {\n      await service.setCompleted(todo.id, todo.name, isComplete);\n      await getTodos();\n    } catch (error) {\n      console.error('Failed to update todo:', error);\n    }\n  }\n\n  async function deleteTodo(id) {\n    try {\n      await service.deleteTask(id);\n      await getTodos();\n    } catch (error) {\n      console.error('Failed to delete todo:', error);\n    }\n  }\n\n  async function updateTodo(id, name, isComplete) {\n    try {\n      await service.updateTask(id, name, isComplete);\n      await getTodos();\n      setEditingId(null);\n      setEditingText(\"\");\n    } catch (error) {\n      console.error('Failed to update todo:', error);\n    }\n  }\n\n  function startEditing(todo) {\n    setEditingId(todo.id);\n    setEditingText(todo.name);\n  }\n\n  function cancelEditing() {\n    setEditingId(null);\n    setEditingText(\"\");\n  }\n\n  function handleEditKeyPress(e, todo) {\n    if (e.key === 'Enter') {\n      updateTodo(todo.id, editingText, todo.isComplete);\n    } else if (e.key === 'Escape') {\n      cancelEditing();\n    }\n  }\n\n  function handleLogout() {\n    service.logout();\n    setIsLoggedIn(false);\n    setTodos([]);\n    setCurrentView('login');\n  }\n\n  // אם לא מחובר, הצג Login או Register\n  if (!isLoggedIn) {\n    return (\n      <div>\n        <div style={{ textAlign: 'center', padding: '20px' }}>\n          <button onClick={() => setCurrentView('login')} style={{ margin: '10px', padding: '10px 20px' }}>\n            Login\n          </button>\n          <button onClick={() => setCurrentView('register')} style={{ margin: '10px', padding: '10px 20px' }}>\n            Register\n          </button>\n        </div>\n        {currentView === 'login' && <Login />}\n        {currentView === 'register' && <Register />}\n      </div>\n    );\n  }\n\n  // אם מחובר, הצג את רשימת המשימות\n  return (\n    <section className=\"todoapp\">\n      <header className=\"header\">\n        <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\n          <h1>todos</h1>\n          <div>\n            <span style={{ marginRight: '10px' }}>Welcome, {localStorage.getItem('username')}</span>\n            <button onClick={handleLogout} style={{ padding: '5px 10px' }}>Logout</button>\n          </div>\n        </div>\n        <form onSubmit={createTodo}>\n          <input className=\"new-todo\" placeholder=\"Well, let's take on the day\" value={newTodo} onChange={(e) => setNewTodo(e.target.value)} />\n        </form>\n      </header>\n      <section className=\"main\" style={{ display: \"block\" }}>\n        <ul className=\"todo-list\">\n          {todos.map(todo => {\n            const isEditing = editingId === todo.id;\n            const className = todo.isComplete ? \"completed\" : \"\";\n            const finalClassName = isEditing ? className + \" editing\" : className;\n            \n            return (\n              <li className={finalClassName} key={todo.id}>\n                <div className=\"view\">\n                  <input className=\"toggle\" type=\"checkbox\" checked={todo.isComplete} onChange={(e) => updateCompleted(todo, e.target.checked)} />\n                  <label onDoubleClick={() => startEditing(todo)}>{todo.name}</label>\n                  <button className=\"destroy\" onClick={() => deleteTodo(todo.id)}></button>\n                </div>\n                {isEditing && (\n                  <input \n                    className=\"edit\" \n                    value={editingText} \n                    onChange={(e) => setEditingText(e.target.value)}\n                    onKeyDown={(e) => handleEditKeyPress(e, todo)}\n                    onBlur={() => updateTodo(todo.id, editingText, todo.isComplete)}\n                    autoFocus\n                  />\n                )}\n              </li>\n            );\n          })}\n        </ul>\n      </section>\n    </section>\n  );\n}\n\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}